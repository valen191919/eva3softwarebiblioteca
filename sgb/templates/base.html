{% load static %}

<!DOCTYPE HTML>
<html>
	<head>
		<title>Biblioteca MJV</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="{% static 'assets/css/main.css' %}">
		<style>
			/* Estilos para la barra superior fija */
			.top-bar {
				background-color: #2c3e50;
				color: white;
				padding: 15px 20px;
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				z-index: 1000;
				display: flex;
				justify-content: space-between;
				align-items: center;
				box-shadow: 0 2px 10px rgba(0,0,0,0.1);
				flex-wrap: wrap;
			}

			.top-bar-left {
				display: flex;
				align-items: center;
				gap: 20px;
			}

			.top-bar-right {
				display: flex;
				align-items: center;
				gap: 15px;
			}

			.user-info {
				display: flex;
				align-items: center;
				gap: 10px;
				font-size: 1rem;
				font-weight: 500;
			}

			.user-icon {
				background-color: #3498db;
				color: white;
				width: 35px;
				height: 35px;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-weight: bold;
				font-size: 1.1rem;
			}

			.logout-btn {
				background-color: #e74c3c;
				color: white;
				padding: 8px 16px;
				border-radius: 5px;
				text-decoration: none;
				font-size: 0.9rem;
				font-weight: 500;
				transition: background-color 0.3s;
				border: none;
				cursor: pointer;
			}

			.logout-btn:hover {
				background-color: #c0392b;
			}

			.admin-btn {
				background-color: #9b59b6;
				color: white;
				padding: 8px 16px;
				border-radius: 5px;
				text-decoration: none;
				font-size: 0.9rem;
				font-weight: 500;
				transition: background-color 0.3s;
			}

			.admin-btn:hover {
				background-color: #8e44ad;
			}

			.logo-text {
				font-size: 1.3rem;
				font-weight: bold;
				color: white;
				text-decoration: none;
			}

			/* Espaciado para el contenido debajo de la barra */
			body {
				padding-top: 70px;
			}

			/* Mejora de visibilidad de textos */
			body {
				font-size: 1.05rem;
				line-height: 1.6;
				color: #2c3e50;
			}

			h1, h2, h3, h4, h5, h6 {
				color: #2c3e50;
				font-weight: 600;
			}

			p {
				color: #34495e;
				font-size: 1.05rem;
			}

			label {
				color: #2c3e50;
				font-weight: 600;
				font-size: 1rem;
			}

			/* Mejora de contraste en inputs */
			input, select, textarea {
				font-size: 1rem;
				color: #2c3e50;
			}

			/* Mejora de botones */
			.button {
				font-size: 1rem;
				font-weight: 600;
				padding: 12px 24px;
			}

			/* Mejora de tablas */
			table {
				font-size: 1rem;
			}

			table th {
				font-weight: 700;
				color: #2c3e50;
			}

			table td {
				color: #34495e;
			}

			/* Responsive */
			@media screen and (max-width: 736px) {
				.top-bar {
					flex-direction: column;
					gap: 10px;
					padding: 10px;
				}

				.top-bar-left, .top-bar-right {
					width: 100%;
					justify-content: center;
				}

				body {
					padding-top: 120px;
				}
			}
		</style>
	</head>

	<body class="is-preload">

		<!-- BARRA SUPERIOR FIJA (solo si el usuario est√° autenticado) -->
		{% if user.is_authenticated %}
		<div class="top-bar">
			<div class="top-bar-left">
				<a href="/dashboard/" class="logo-text">üìö Biblioteca MJV</a>
			</div>
			<div class="top-bar-right">
				<div class="user-info">
					<div class="user-icon">
						{{ user.first_name.0|default:user.username.0|upper }}
					</div>
					<span>
						{{ user.get_full_name|default:user.username }}
						{% if user.perfil %}
							<span style="color: #bdc3c7; font-size: 0.85rem;">({{ user.perfil.get_rol_display }})</span>
						{% endif %}
					</span>
				</div>
				{% if user.is_superuser or user.is_staff %}
					<a href="/admin/" class="admin-btn" target="_blank">‚öôÔ∏è Admin</a>
				{% endif %}
				<a href="/logout/" class="logout-btn">üö™ Cerrar Sesi√≥n</a>
			</div>
		</div>
		{% endif %}

		<!-- NAV (solo visible en home si no est√° autenticado) -->
		{% if not user.is_authenticated %}
		<nav id="nav">
			<ul class="container">
				<li><a href="/">Inicio</a></li>
			</ul>
		</nav>
		{% endif %}

		<!-- CONTENIDO DIN√ÅMICO -->
		{% block content %}
		{% endblock %}

		<!-- FOOTER BONITO -->
		<footer id="footer" class="wrapper style4">
			<div class="container medium">
				<ul class="social">
					<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
				</ul>
				<ul id="copyright">
					<li>&copy; Biblioteca Comunitaria MJV. Todos los derechos reservados.</li>
				</ul>
			</div>
		</footer>

		<!-- Scripts -->
		<script src="{% static 'assets/js/jquery.min.js' %}"></script>
		<script src="{% static 'assets/js/jquery.scrolly.min.js' %}"></script>
		<script src="{% static 'assets/js/browser.min.js' %}"></script>
		<script src="{% static 'assets/js/breakpoints.min.js' %}"></script>
		<script src="{% static 'assets/js/util.js' %}"></script>
		<script src="{% static 'assets/js/main.js' %}"></script>

	</body>
</html>
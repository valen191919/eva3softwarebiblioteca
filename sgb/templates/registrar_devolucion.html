{% extends "base.html" %}
{% load static %}

{% block content %}

<article class="wrapper style1">
  <div class="container">
    <header style="text-align:center;">
      <h1 style="color: #2c3e50; font-size: 2.2rem; font-weight: 700;">ðŸ“– Devolver Libro</h1>
      <p style="color: #7f8c8d; font-size: 1.15rem;">Registra la devoluciÃ³n de tus libros prestados</p>
    </header>

    <!-- Mensajes de Ã©xito o error -->
    {% if messages %}
      <div style="margin: 20px 0;">
        {% for message in messages %}
          <div style="padding: 18px; margin-bottom: 10px; border-radius: 8px; background-color: #fff9e6; border: 2px solid #f39c12; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
            <strong style="color: #2c3e50; font-size: 1.1rem;">{{ message }}</strong>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    {% if prestamos %}
      <div style="margin-top: 30px;">
        <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50; font-size: 1.6rem; font-weight: 700;">Tus PrÃ©stamos Activos</h3>
        
        {% for prestamo in prestamos %}
          <div style="border: 3px solid #3498db; padding: 25px; margin-bottom: 20px; border-radius: 10px; background-color: #f8f9fa; box-shadow: 0 3px 10px rgba(0,0,0,0.1);">
            <h4 style="color: #2c3e50; font-size: 1.4rem; font-weight: 700; margin-bottom: 10px;">ðŸ“š {{ prestamo.libro.titulo }}</h4>
            <p style="color: #34495e; font-size: 1.1rem; margin: 8px 0;"><strong>Autor:</strong> {{ prestamo.libro.autor }}</p>
            <p style="color: #34495e; font-size: 1.1rem; margin: 8px 0;"><strong>Fecha de PrÃ©stamo:</strong> {{ prestamo.fecha_prestamo|date:"d/m/Y" }}</p>
            <p style="color: #34495e; font-size: 1.1rem; margin: 8px 0;"><strong>Fecha de DevoluciÃ³n Esperada:</strong> {{ prestamo.fecha_devolucion_esperada|date:"d/m/Y" }}</p>

            <form method="POST" style="margin-top: 20px;">
              {% csrf_token %}
              <input type="hidden" name="prestamo_id" value="{{ prestamo.id }}">
              <button type="submit" class="button" style="font-size: 1.1rem; padding: 12px 24px; font-weight: 600;">ðŸ”„ Devolver este Libro</button>
            </form>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div style="text-align: center; margin: 40px 0;">
        <p style="font-size: 1.2rem; color: #999;">
          ðŸ“­ No tienes prÃ©stamos activos.
        </p>
        <a href="/prestamo/" class="button">Solicitar un Libro</a>
      </div>
    {% endif %}

    <div style="text-align: center; margin-top: 30px;">
      <a href="/dashboard/" class="button alt">ðŸ”™ Volver al Dashboard</a>
    </div>

  </div>
</article>

{% endblock %}